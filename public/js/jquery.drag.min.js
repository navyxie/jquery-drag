var NAVY=NAVY||{};NAVY.Drag=function(t,e,i){this.orignSelf=t,this.orignTarget=e,t===e?t=e=$(t):(t=$(t),e=$(e));var a={left:0,top:0,limitObj:e.offsetParent()||"body",isMoveSpace:{x:3,y:3},isClearMargin:!0};this.jqObj=t,this.targetObj=e,this.opts=$.extend(a,i);var s=$(this.opts.limitObj);this.limitObjWidth=s.outerWidth(),this.limitObjHeight=s.outerHeight(),this.opts.isClearMargin&&this.targetObj.css("margin","0"),this.setMaxvalue(),this.init()},NAVY.Drag.prototype={init:function(){var t=this.targetObj,e=this.jqObj,i=this.opts;return e.css({cursor:"move"}),t.css({position:"absolute",left:i.left,top:i.top}),this.initEvent(),this},initEvent:function(){var t,e,i=this,a=this.targetObj,s=this.opts,o=!1,r={x:0,y:0},h={left:s.left,top:s.top},n=s.limitObj;return n.find(i.orignSelf).mousedown(function(s){return o=!0,a=i.orignSelf===i.orignTarget?$(this):$(this).closest(i.orignTarget),i.limitObjWidth=n.outerWidth(),i.limitObjHeight=n.outerHeight(),i.setMaxvalue(a),t=i.maxMove.x,e=i.maxMove.y,r.x=s.pageX,r.y=s.pageY,h.left=a.position().left,h.top=a.position().top,NAVY.UTIL.Style.setMaxZIndex(a[0]),!1}),$(document).on("mousemove mouseup",function(i){switch(i.type){case"mouseup":return o=!1,!1;case"mousemove":if(o){var n={x:i.pageX,y:i.pageY},g=n.x-r.x,p=n.y-r.y;if(0===g%s.isMoveSpace.x||0===p%s.isMoveSpace.y){var d=h.left+g,f=h.top+p;d=0>=d?0:d>t?t:d,f=0>=f?0:f>e?e:f,a.css({left:d,top:f})}}return!1}}),this},getStyle:function(){var t=this.targetObj;return{left:t.css("left"),top:t.css("top"),zIndex:t.css("z-index")}},unDrag:function(t,e){return t=t||this.jqObj,e=e||this.targetObj,t.css({cursor:"default"}).unbind(),e.css({position:"",left:"",top:""}),this},setMaxvalue:function(t){var e=this.opts;if(t=t||this.targetObj,this.maxMove={x:this.limitObjWidth-t.outerWidth(),y:this.limitObjHeight-t.outerHeight()},!e.isClearMargin){var i=t.css("marginLeft"),a=t.css("marginRight"),s=t.css("marginTop"),o=t.css("marginBottom");this.maxMove.x=this.limitObjWidth-t.outerWidth()-parseInt(a)-parseInt(i),this.maxMove.y=this.limitObjHeight-t.outerHeight()-parseInt(s)-parseInt(o)}},setCursorDefault:function(){this.jqObj.css({cursor:"default"})},setCursorMove:function(){this.jqObj.css({cursor:"move"})}};