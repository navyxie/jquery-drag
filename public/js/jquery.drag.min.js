var NAVY=NAVY||{};NAVY.Drag=function(e,t,n){var r,i,s;e=$(e),t=$(t),r=this,i={left:0,top:0,limitObj:document,isMoveSpace:{x:3,y:3}},r.jqObj=e,r.targetObj=t,r.opts=$.extend(i,n),s=$(r.opts.limitObj),r.maxMove={x:s.outerWidth()-t.outerWidth(),y:s.outerHeight()-t.outerHeight()},r.init()},NAVY.Drag.prototype={init:function(){var e=this.targetObj,t=this.jqObj,n=this.opts;t.css({cursor:"move"}),e.css({position:"absolute",left:n.left,top:n.top}),this.initEvent()},initEvent:function(){var e=this.jqObj,t=this.targetObj,n=this.opts,r=this.maxMove.x,i=this.maxMove.y,s=!1,o={x:0,y:0},u={left:n.left,top:n.top};$("body").find(t).find(e).mousedown(function(e){return s=!0,o.x=e.pageX,o.y=e.pageY,u.left=t.position().left,u.top=t.position().top,NAVY.UTIL.Style.setMaxZIndex(t[0]),!1}),$(document).on("mousemove mouseup",function(e){var a,f,l,c,h;switch(e.type){case"mouseup":return s=!1,!1;case"mousemove":if(s){a={x:e.pageX,y:e.pageY},f=a.x-o.x,l=a.y-o.y;if(f%n.isMoveSpace.x===0||l%n.isMoveSpace.y===0)c=u.left+f,h=u.top+l,c=c<=0?0:c>r?r:c,h=h<=0?0:h>i?i:h,t.css({left:c,top:h})}return!1}})},getStyle:function(){var e=this.targetObj;return{left:e.css("left"),top:e.css("top"),zIndex:e.css("z-index")}},unDrag:function(){var e=this.jqObj,t=this.targetObj;return e.css({cursor:"default"}).unbind(),t.css({position:"",left:"",top:""}),!1}}