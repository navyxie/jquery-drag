var NAVY=NAVY||{};NAVY.Drag=function(t,e,i){t=$(t),e=$(e);var r=this,a={left:0,top:0,limitObj:document,isMoveSpace:{x:3,y:3}};r.jqObj=t,r.targetObj=e,r.opts=$.extend(a,i);var n=$(r.opts.limitObj);r.maxMove={x:n.outerWidth()-e.outerWidth(),y:n.outerHeight()-e.outerHeight()},r.init()},NAVY.Drag.prototype={init:function(){var t=this.targetObj,e=this.jqObj,i=this.opts;return e.css({cursor:"move"}),t.css({position:"absolute",left:i.left,top:i.top}),this.initEvent(),this},initEvent:function(){var t=this.jqObj,e=this.targetObj,i=this.opts,r=this.maxMove.x,a=this.maxMove.y,n=!1,s={x:0,y:0},o={left:i.left,top:i.top};return $("body").find(e).find(t).mousedown(function(t){return n=!0,s.x=t.pageX,s.y=t.pageY,o.left=e.position().left,o.top=e.position().top,NAVY.UTIL.Style.setMaxZIndex(e[0]),!1}),$(document).on("mousemove mouseup",function(t){switch(t.type){case"mouseup":return n=!1,!1;case"mousemove":if(n){var p={x:t.pageX,y:t.pageY},h=p.x-s.x,O=p.y-s.y;if(0===h%i.isMoveSpace.x||0===O%i.isMoveSpace.y){var c=o.left+h,b=o.top+O;c=0>=c?0:c>r?r:c,b=0>=b?0:b>a?a:b,e.css({left:c,top:b})}}return!1}}),this},getStyle:function(){var t=this.targetObj;return{left:t.css("left"),top:t.css("top"),zIndex:t.css("z-index")}},unDrag:function(){var t=this.jqObj,e=this.targetObj;return t.css({cursor:"default"}).unbind(),e.css({position:"",left:"",top:""}),this}};