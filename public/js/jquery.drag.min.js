var NAVY=NAVY||{};NAVY.Drag=function(t,i,s){this.orignSelf=t,this.orignTarget=i,t===i?t=i=$(t):(t=$(t),i=$(i));var e={left:0,top:0,limitObj:i.offsetParent()||"body",isMoveSpace:{x:3,y:3},isClearMargin:!0};this.jqObj=t,this.targetObj=i,this.opts=$.extend(e,s);var h=$(this.opts.limitObj);this.limitObjWidth=h.outerWidth(),this.limitObjHeight=h.outerHeight(),this.opts.isClearMargin&&this.targetObj.css("margin","0"),this.setMaxvalue(),this.init()},NAVY.Drag.prototype={init:function(){var t=this.targetObj,i=this.jqObj,s=this.opts;return i.css({cursor:"move"}),t.css({position:"absolute",left:s.left,top:s.top}),this.initEvent(),this},initEvent:function(){var t=this;this.jqObj;var i,s,e=this.targetObj,h=this.opts,r=!1,a={x:0,y:0},o={left:h.left,top:h.top};return h.limitObj.find(t.orignSelf).mousedown(function(h){return r=!0,e=t.orignSelf===t.orignTarget?$(this):$(this).closest(t.orignTarget),t.setMaxvalue(e),i=t.maxMove.x,s=t.maxMove.y,a.x=h.pageX,a.y=h.pageY,o.left=e.position().left,o.top=e.position().top,NAVY.UTIL.Style.setMaxZIndex(e[0]),!1}),$(document).on("mousemove mouseup",function(t){switch(t.type){case"mouseup":return r=!1,!1;case"mousemove":if(r){var n={x:t.pageX,y:t.pageY},d=n.x-a.x,p=n.y-a.y;if(0===d%h.isMoveSpace.x||0===p%h.isMoveSpace.y){var g=o.left+d,l=o.top+p;g=0>=g?0:g>i?i:g,l=0>=l?0:l>s?s:l,e.css({left:g,top:l})}}return!1}}),this},getStyle:function(){var t=this.targetObj;return{left:t.css("left"),top:t.css("top"),zIndex:t.css("z-index")}},unDrag:function(t,i){return t=t||this.jqObj,i=i||this.targetObj,t.css({cursor:"default"}).unbind(),i.css({position:"",left:"",top:""}),this},setMaxvalue:function(t){var i=this.opts;if(t=t||this.targetObj,this.maxMove={x:this.limitObjWidth-t.outerWidth(),y:this.limitObjHeight-t.outerHeight()},!i.isClearMargin){var s=t.css("marginLeft"),e=t.css("marginRight"),h=t.css("marginTop"),r=t.css("marginBottom");this.maxMove.x=this.limitObjWidth-t.outerWidth()-parseInt(e)-parseInt(s),this.maxMove.y=this.limitObjHeight-t.outerHeight()-parseInt(h)-parseInt(r)}},setCursorDefault:function(){this.jqObj.css({cursor:"default"})},setCursorMove:function(){this.jqObj.css({cursor:"move"})}};