var NAVY=NAVY||{};NAVY.Drag=function(t,e,i){t===e?t=e=$(t):(t=$(t),e=$(e));var s=this,o={left:0,top:0,limitObj:e.offsetParent(),isMoveSpace:{x:3,y:3},isClearMargin:!0};s.jqObj=t,s.targetObj=e,s.opts=$.extend(o,i);var n=$(s.opts.limitObj);if(s.maxMove={x:n.outerWidth()-e.outerWidth(),y:n.outerHeight()-e.outerHeight()},s.opts.isClearMargin)s.targetObj.css("margin","0");else{var r=e.css("marginLeft"),a=e.css("marginRight"),p=e.css("marginTop"),u=e.css("marginBottom");console.log("1:"+r+"2:"+a+"3:"+p+"4:"+u),s.maxMove.x=n.outerWidth()-e.outerWidth()-parseInt(a)-parseInt(r),s.maxMove.y=n.outerHeight()-e.outerHeight()-parseInt(p)-parseInt(u)}s.init()},NAVY.Drag.prototype={init:function(){var t=this.targetObj,e=this.jqObj,i=this.opts;return e.css({cursor:"move"}),t.css({position:"absolute",left:i.left,top:i.top}),this.initEvent(),this},initEvent:function(){var t=this.jqObj,e=this.targetObj,i=this.opts,s=this.maxMove.x,o=this.maxMove.y,n=!1,r={x:0,y:0},a={left:i.left,top:i.top};return $("body").find(t).mousedown(function(t){return n=!0,r.x=t.pageX,r.y=t.pageY,a.left=e.position().left,a.top=e.position().top,NAVY.UTIL.Style.setMaxZIndex(e[0]),!1}),$(document).on("mousemove mouseup",function(t){switch(t.type){case"mouseup":return n=!1,!1;case"mousemove":if(n){var p={x:t.pageX,y:t.pageY},u=p.x-r.x,f=p.y-r.y;if(0===u%i.isMoveSpace.x||0===f%i.isMoveSpace.y){var l=a.left+u,c=a.top+f;l=0>=l?0:l>s?s:l,c=0>=c?0:c>o?o:c,e.css({left:l,top:c})}}return!1}}),this},getStyle:function(){var t=this.targetObj;return{left:t.css("left"),top:t.css("top"),zIndex:t.css("z-index")}},unDrag:function(){var t=this.jqObj,e=this.targetObj;return t.css({cursor:"default"}).unbind(),e.css({position:"",left:"",top:""}),this}};