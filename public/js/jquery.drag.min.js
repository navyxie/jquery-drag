var NAVY=NAVY||{};NAVY.Drag=function(t,i,e){this.orignSelf=t,this.orignTarget=i,t===i?t=i=$(t):(t=$(t),i=$(i));var a={left:0,top:0,limitObj:i.offsetParent()||"body",isMoveSpace:{x:3,y:3},isClearMargin:!0};this.jqObj=t,this.targetObj=i,this.opts=$.extend(a,e);var s=$(this.opts.limitObj);this.limitObjWidth=s.outerWidth(),this.limitObjHeight=s.outerHeight(),this.opts.isClearMargin&&this.targetObj.css("margin","0"),this.setMaxvalue(),this.init()},NAVY.Drag.prototype={init:function(){var t=this.targetObj,i=this.jqObj,e=this.opts;return i.css({cursor:"move"}),t.css({position:"absolute",left:e.left,top:e.top}),this.initEvent(),this},initEvent:function(){var t,i,e=this,a=this.targetObj,s=this.opts,o=!1,r={x:0,y:0},n={left:s.left,top:s.top},m=s.limitObj;return m.find(e.orignSelf).mousedown(function(s){return o=!0,a=e.orignSelf===e.orignTarget?$(this):$(this).closest(e.orignTarget),e.limitObjWidth=m.outerWidth(),e.limitObjHeight=m.outerHeight(),e.setMaxvalue(a),t=e.maxMove.x,i=e.maxMove.y,r.x=s.pageX,r.y=s.pageY,n.left=a.position().left,n.top=a.position().top,NAVY.UTIL.Style.setMaxZIndex(a[0]),!1}),$(document).on("mousemove mouseup",function(e){switch(e.type){case"mouseup":return o=!1,!1;case"mousemove":if(o){var m={x:e.pageX,y:e.pageY},g=m.x-r.x,c=m.y-r.y;if(0===g%s.isMoveSpace.x||0===c%s.isMoveSpace.y){var d=n.left+g,p=n.top+c;d=0>=d?0:d>t?t:d,p=0>=p?0:p>i?i:p,a.css({left:d,top:p})}}return!1}}),this},getStyle:function(){var t=this.targetObj;return{left:t.css("left"),top:t.css("top"),zIndex:t.css("z-index")}},unDrag:function(t,i){return t=t||this.jqObj,i=i||this.targetObj,t.css({cursor:"default"}).unbind(),i.css({position:"",left:"",top:""}),this},setMaxvalue:function(t){var i=this.opts;if(t=t||this.targetObj,this.maxMove={x:this.limitObjWidth-t.outerWidth(),y:this.limitObjHeight-t.outerHeight()},!i.isClearMargin){var e=t.css("marginLeft"),a=t.css("marginRight"),s=t.css("marginTop"),o=t.css("marginBottom");this.maxMove.x=this.limitObjWidth-t.outerWidth()-parseInt(a)-parseInt(e),this.maxMove.y=this.limitObjHeight-t.outerHeight()-parseInt(s)-parseInt(o)}},setCursorDefault:function(){this.jqObj.css({cursor:"default"})},setCursorMove:function(){this.jqObj.css({cursor:"move"})}};